import{a as k}from"./chunk-HGGFVOC5.js";import"./chunk-NWGYCC23.js";import{d as I}from"./chunk-QQMD7XL2.js";import{k as h,l as S,m as O}from"./chunk-ALSOUJAH.js";import{$a as C,Cb as c,Db as P,Eb as _,Fb as b,Ra as s,Wa as f,eb as x,fa as p,ga as d,lb as u,nb as v,pb as i,qb as a,ub as m,vb as g,wb as l}from"./chunk-WXL45R7I.js";function w(n,o){if(n&1){let e=m();i(0,"li",10),g("click",function(){let r=p(e).index,R=l(2);return d(R.selecionarResposta(r))}),c(1),a()}if(n&2){let e=o.$implicit,t=o.index,r=l(2);v("selecionada",r.respostaSelecionada===t),s(),_(" ",e.texto," ")}}function E(n,o){if(n&1){let e=m();i(0,"section",4)(1,"div",5),c(2),a(),i(3,"div",6),c(4),a(),i(5,"ul",7),x(6,w,2,3,"li",8),a(),i(7,"button",9),g("click",function(){p(e);let r=l();return d(r.proximaPergunta())}),c(8),a()()}if(n&2){let e=o.ngIf,t=l();s(2),b(" Pergunta ",t.perguntaAtualIndex+1," de ",t.perguntas.length," "),s(2),_(" ",e.enunciado," "),s(2),u("ngForOf",e.respostas),s(),u("disabled",t.respostaSelecionada===null),s(),_(" ",t.perguntaAtualIndex+1<t.perguntas.length?"Pr\xF3xima":"Finalizar"," ")}}function F(n,o){if(n&1){let e=m();i(0,"section",11)(1,"h2"),c(2,"Nenhuma pergunta encontrada para a categoria "),i(3,"strong"),c(4),a(),c(5,"."),a(),i(6,"button",12),g("click",function(){p(e);let r=l();return d(r.irParaCadastro())}),c(7," Cadastrar nova pergunta "),a(),i(8,"button",13),g("click",function(){p(e);let r=l();return d(r.reiniciar())}),c(9," Voltar \xE0 sele\xE7\xE3o de categoria "),a()()}if(n&2){let e=l();s(4),P(e.categoriaSelecionada)}}function V(n,o){if(n&1&&(i(0,"div",17)(1,"div",18),c(2),a(),i(3,"div",19),c(4),a()()),n&2){let e=o.$implicit,t=o.index,r=l(2);v("correta",e.respostas[r.respostasUsuario[t]].correta)("errada",!e.respostas[r.respostasUsuario[t]].correta),s(2),b(" Pergunta ",t+1,": ",e.enunciado," "),s(2),_(" Sua resposta: ",e.respostas[r.respostasUsuario[t]].texto||"Nenhuma"," ")}}function j(n,o){if(n&1){let e=m();i(0,"section",14)(1,"h2",5),c(2,"Resultado Final"),a(),x(3,V,5,7,"div",15),i(4,"button",16),g("click",function(){p(e);let r=l();return d(r.reiniciar())}),c(5,"Reiniciar"),a()()}if(n&2){let e=l();s(3),u("ngForOf",e.perguntas)}}var M=class n{constructor(o,e){this.perguntaService=o;this.router=e}nomeUsuario="";categoriaSelecionada="";perguntas=[];perguntaAtualIndex=0;respostaSelecionada=null;respostasUsuario=[];jogoFinalizado=!1;carregando=!0;ngOnInit(){let o=localStorage.getItem("quiz_nome"),e=localStorage.getItem("quiz_categoria");if(!o||!e){this.router.navigate(["/jogos/pergunta-resposta/inicio"]);return}this.nomeUsuario=o,this.categoriaSelecionada=e,this.perguntaService.listarPerguntasPorCategoria(e).subscribe({next:t=>{this.perguntas=t,this.carregando=!1,this.perguntas.length||(this.carregando=!1)},error:t=>{console.error("Erro ao carregar perguntas:",t),this.router.navigate(["/jogos/pergunta-resposta/inicio"])}})}selecionarResposta(o){this.respostaSelecionada=o}irParaCadastro(){this.router.navigate(["/jogos/pergunta-resposta/cadastro"])}proximaPergunta(){this.respostaSelecionada!==null&&(this.respostasUsuario.push(this.respostaSelecionada),this.respostaSelecionada=null,this.perguntaAtualIndex+1<this.perguntas.length?this.perguntaAtualIndex++:this.jogoFinalizado=!0)}reiniciar(){this.router.navigate(["/jogos/pergunta-resposta/inicio"])}get perguntaAtual(){return this.perguntas.length>0?this.perguntas[this.perguntaAtualIndex]:null}static \u0275fac=function(e){return new(e||n)(f(k),f(I))};static \u0275cmp=C({type:n,selectors:[["app-pergunta-resposta"]],decls:4,vars:3,consts:[[1,"quiz-container"],["class","jogo",4,"ngIf"],["class","sem-perguntas",4,"ngIf"],["class","resultado",4,"ngIf"],[1,"jogo"],[1,"titulo-quiz"],[1,"texto-pergunta"],[1,"respostas"],[3,"selecionada","click",4,"ngFor","ngForOf"],[1,"botao-proximo",3,"click","disabled"],[3,"click"],[1,"sem-perguntas"],[1,"botao-cadastrar",3,"click"],[1,"botao-voltar",3,"click"],[1,"resultado"],["class","resultado-item",3,"correta","errada",4,"ngFor","ngForOf"],[1,"botao-reiniciar",3,"click"],[1,"resultado-item"],[1,"pergunta-txt"],[1,"resposta-txt"]],template:function(e,t){e&1&&(i(0,"main",0),x(1,E,9,6,"section",1)(2,F,10,1,"section",2)(3,j,6,1,"section",3),a()),e&2&&(s(),u("ngIf",!t.jogoFinalizado&&t.perguntaAtual),s(),u("ngIf",!t.carregando&&t.perguntas.length===0),s(),u("ngIf",t.jogoFinalizado))},dependencies:[O,h,S],styles:[".quiz-container[_ngcontent-%COMP%]{max-width:700px;margin:auto;padding:2rem;background-color:var(--cor-formulario);border-radius:var(--radius-md);box-shadow:var(--sombra-forte);text-align:center}.titulo-quiz[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:1rem}.texto-pergunta[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1.5rem;color:var(--cor-texto-primario)}.respostas[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 2rem;display:flex;flex-direction:column;gap:1rem}.respostas[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1rem;border:1px solid var(--cor-borda);border-radius:var(--radius-md);background-color:var(--cor-fundo-secundario);cursor:pointer;transition:background .2s}.respostas[_ngcontent-%COMP%]   li.selecionada[_ngcontent-%COMP%]{background-color:var(--cor-secundaria);color:#fff}.respostas[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--btn-fundo-hover)}.botao-proximo[_ngcontent-%COMP%], .botao-reiniciar[_ngcontent-%COMP%]{background-color:var(--cor-primaria);border:none;border-radius:var(--radius-md);padding:.75rem 1.5rem;font-weight:700;color:var(--btn-texto);cursor:pointer;transition:background-color .3s}.botao-proximo[_ngcontent-%COMP%]:hover, .botao-reiniciar[_ngcontent-%COMP%]:hover{background-color:var(--btn-fundo-hover)}.botao-proximo[_ngcontent-%COMP%]:disabled, .botao-reiniciar[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.resultado[_ngcontent-%COMP%]   .resultado-item[_ngcontent-%COMP%]{padding:1rem;border-radius:var(--radius-md);margin-bottom:1rem;text-align:left}.resultado[_ngcontent-%COMP%]   .resultado-item.correta[_ngcontent-%COMP%]{background-color:#d4edda;border:1px solid #28a745;color:#155724}.resultado[_ngcontent-%COMP%]   .resultado-item.errada[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #dc3545;color:#721c24}"]})};export{M as PerguntaRespostaComponent};
